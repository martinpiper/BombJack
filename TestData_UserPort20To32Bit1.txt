;$00000100 = DDR set to input from the C64
;$00010000 = _PC
;$01000000 = SP1
;$02000000 = SP2
;$04000000 = SERIALATN
;$08000000 = PA2

; During power-on reset
d$00010000
d$00010001
d$00010002
d$00010003
d$00010004

; After power-on reset
; Set latch7
d$07000002
d$07010002

; Set latch0
d$00010004
d$00000037
d$00010037

; Set latch1
d$01010037
d$01000001
d$01010001

; Set latch6 (Write RAM)
d$06010000
; Write $23
d$06000023
d$06010023
; Write $34
d$06000034
d$06010034
; Write $17
d$06000017
d$06010017
; Write $98
d$06000098
d$06010098


; Reset address...
d$00010004
; Set latch0 = $37
d$00000037
d$00010037

; Set latch1
d$01010037
; Set latch0 = $01
d$01000001
d$01010001

; Simulate C64 side setting user port DDR
d$01010101

; Set latch5
d$05010101
; "Write" latch5 (Read RAM)
d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100




; Set latch6 (Write RAM) continuing with the last read address
d$06010000
; Write $11
d$06000011
d$06010011
; Write $22
d$06000022
d$06010022
; Write $33
d$06000033
d$06010033
; Write $44
d$06000044
d$06010044


; Reset address...
d$00010004
; Set latch0 = $37
d$00000037
d$00010037

; Set latch7 - Enable pass-through
d$07000000
d$07010000

; PA2 toggle twice
d$00010000
d$08010000
d$00010000
d$08010000
d$00010001
d$08010002
d$00010003
d$08010004


; Set latch7 - Enable RAM to pass-through
d$07000001
d$07010001


; Simulate C64 side setting user port DDR
d$01010101

; Set latch5
d$05010101
; "Write" latch5 (Read RAM)
d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100

d$05000100
d$05010100
